{
  "version": 3,
  "sources": ["../../../../src/functions/listTodos.ts", "../../../../src/utils/dynamodbClients.ts"],
  "sourcesContent": ["import { APIGatewayProxyHandler } from \"aws-lambda\";\nimport { document } from \"../utils/dynamodbClients\";\n\nexport const handler: APIGatewayProxyHandler = async (event) => {\n  // recebendo dados do corpo da requisi\u00E7\u00E3o:\n  const { user_id } = event.pathParameters;\n\n  const response = await document\n    .scan({\n      TableName: \"todos\",\n      FilterExpression: \"user_id = :user_id\",\n      ExpressionAttributeValues: {\n        \":user_id\": user_id,\n      },\n    })\n    .promise();\n\n  console.log('response.Items.length: ', response.Items.length);\n  const allTodos = response.Items;\n\n  if (allTodos) {\n    return {\n      statusCode: 201,\n      body: JSON.stringify({\n        user_id,\n        todos: allTodos,\n      }),\n    };\n  }\n\n  return {\n    statusCode: 400,\n    body: JSON.stringify({\n      message: \"Todo n\u00E3o existe\",\n    }),\n  };\n};\n", "import { DynamoDB } from \"aws-sdk\";\n\nconst options = {\n  region: \"localhost\",\n  endpoint: \"http://localhost:8000\",\n  accessKeyId: \"xxxx\",\n  secretAccessKey: \"xxxx\",\n};\n\n/**\n * A vari\u00E1vel de ambiente IS_OFFLINE \u00E9 definida como 'true' pelo plugin \"serverless-dynamodb-local\"\n */\nconst isOffline = () => {\n  console.log(\"process.env.IS_OFFLINE: \", process.env.IS_OFFLINE);\n  return process.env.IS_OFFLINE;\n};\n\nexport const document = isOffline()\n  ? new DynamoDB.DocumentClient(options)\n  : new DynamoDB.DocumentClient();\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,qBAAyB;AAEzB,IAAM,UAAU;AAAA,EACd,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,aAAa;AAAA,EACb,iBAAiB;AACnB;AAKA,IAAM,YAAY,MAAM;AACtB,UAAQ,IAAI,4BAA4B,QAAQ,IAAI,UAAU;AAC9D,SAAO,QAAQ,IAAI;AACrB;AAEO,IAAM,WAAW,UAAU,IAC9B,IAAI,wBAAS,eAAe,OAAO,IACnC,IAAI,wBAAS,eAAe;;;ADhBzB,IAAM,UAAkC,OAAO,UAAU;AAE9D,QAAM,EAAE,YAAY,MAAM;AAE1B,QAAM,WAAW,MAAM,SACpB,KAAK;AAAA,IACJ,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,2BAA2B;AAAA,MACzB,YAAY;AAAA,IACd;AAAA,EACF,CAAC,EACA,QAAQ;AAEX,UAAQ,IAAI,2BAA2B,SAAS,MAAM,MAAM;AAC5D,QAAM,WAAW,SAAS;AAE1B,MAAI,UAAU;AACZ,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA,QACnB;AAAA,QACA,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AAAA,IACL,YAAY;AAAA,IACZ,MAAM,KAAK,UAAU;AAAA,MACnB,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AACF;",
  "names": []
}
